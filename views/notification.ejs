<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ログ表示</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 4px 8px; text-align: left; }
    th { background-color: #f2f2f2; }
  </style>
</head>
<body>
  <h1>注文状況</h1>
  <div class="button-container">
  <% items.forEach((item, index) => { %>
    <div style="margin-bottom: 10px;">
      <form action="/complete" method="POST" style="display:inline;">
        <input type="hidden" name="index" value="<%= index %>">
        <button type="submit" class="blue-button"><%= item.name %> 焼けた</button>
      </form>
    </div>
  <% }) %>
</div>

  <h2>操作ログ</h2>
  <table>
    <thead>
      <tr>
        <th>時間</th>
        <th>ユーザー</th>
        <th>内容</th>
      </tr>
    </thead>
    <tbody>
      <% logs.forEach(log => { %>
        <tr>
          <td><%= log.time %></td>
          <td><%= log.user %></td>
          <td><%= log.message %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  <script>
  setInterval(() => {
    fetch('/notification-data')
      .then(res => res.json())
      .then(logs => {
        const tbody = document.querySelector('tbody');
        tbody.innerHTML = '';
        logs.forEach(log => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${log.time}</td><td>${log.user}</td><td>${log.message}</td>`;
          tbody.appendChild(tr);
        });
      });
  }, 2000);
</script>
</body>
</html>
